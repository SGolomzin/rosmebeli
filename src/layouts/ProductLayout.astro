---
import Layout from './BaseLayout.astro';

import DetailsTable from '../components/DetailsTable.astro';
import ImageGrid from '../components/ImageGrid.astro';
import Button from '../components/Button.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';

const { frontmatter: fm } = Astro.props;

const ImageObject = {url: fm.thumbnail.url, alt: fm.thumbnail.alt}

const formatPrice = (price: number) => new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB', maximumFractionDigits: 0 }).format(price);
---

<Layout title=`${fm.name} | РОСМЕБЕЛЬ`>
	<main>
		<article class="section-block">
			<div class="container container-grid product">
				<Breadcrumbs class="product__breadcrumbs"  currentPage={fm.name} />
				<ImageGrid class="product__images" images={[ImageObject, ImageObject, ImageObject, ImageObject, ImageObject]} />
				<h2 class="product__heading">
					<span class="product__name">{fm.name}</span>
					<span class="product__price">{formatPrice(fm.price)}</span>
				</h2>
				<div class="product__actions">
					<Button appearance="ghost">Вызвать замерщика</Button>
					<Button disabled>Расчитать стоимость</Button>
				</div>
				<div class="product__info">
					<slot />
					<DetailsTable details={fm.details} />
				</div>
			</div>
		</article>
	</main>
</Layout>

<style lang="scss">
	@import "../styles/_breakpoints.scss";

	.product {
		grid-auto-flow: dense;

		&__breadcrumbs,
		&__images,
		&__heading,
		&__name,
		&__info,
		&__price,
		&__actions {
			grid-column: 1 / -1;
		}

		&__heading {
			display: grid;
			grid-template-columns: subgrid;
			gap: 1.25rem;
			margin-bottom: 0;
		}

		&__actions {
			display: flex;
			flex-direction: column;
			gap: 0.625rem;
		}

		@include breakpoint(md) {
			&__name,
			&__info {
				grid-column: 1 / 3;
			}

			&__price,
			&__actions {
				grid-column: 3 / -1;
			}
		}

		@include breakpoint(xl) {
			&__name,
			&__info {
				grid-column: 1 / 7;
			}

			&__price,
			&__actions {
				grid-column: 7 / -1;
			}
		}
	}
</style>